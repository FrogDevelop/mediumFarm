<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="style.css">
    <link href="icon.png" rel="icon">
    <title>medium Farm</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tonconnect/sdk@latest/dist/tonconnect-sdk.min.js"></script> 
    <script src="wallet.js" type="module"></script>
    <script src="script.js" type="module" defer></script>
    
    <script>
        window.addEventListener("DOMContentLoaded", () => {
            const tg = window.Telegram?.WebApp;
            if (tg) {
                tg.disableClosingConfirmation(); 
                tg.expand();
                if (tg.isExpanded && tg.platform !== 'unknown') {
                    document.documentElement.style.height = '100vh';
                    document.body.style.height = '100vh';
                }
                console.log('Telegram WebApp initialized:', {
                    isExpanded: tg.isExpanded,
                    viewportHeight: tg.viewportHeight,
                    platform: tg.platform
                });
            }
        });
    </script>
</head>
<body>
    <div id="loading-screen" class="loading-screen">
        <div class="loader-content">
          <img src="icon.png" alt="Loader Bud" class="loader-bud">
          <div class="loader-bar">
            <div class="loader-fill"></div>
          </div>
        </div>
      </div>
    <header>
        <div class="stats">
            <div class="money">0</div>
            <img src="money.png" alt="">
        </div>
    </header>
    <div class="lamp-conteiner">
        <div class="lamp">
            <img src="lamp.png" alt="">
        </div>
    </div>
    <div class="farm_plant">
        <div class="plant">
            <img src="plant.png" alt="">
        </div>
    </div>
    <div class="lamp-glow"></div>
    <div class="buds">
        <img src="bud.png" class="bud bud1">
        <div class="leaves leaves1"></div>
        <img src="bud.png" class="bud bud2">
        <div class="leaves leaves2"></div>
        <img src="bud.png" class="bud bud3">
        <div class="leaves leaves3"></div>
        <img src="bud.png" class="bud bud4">
        <div class="leaves leaves4"></div>
        <img src="bud.png" class="bud bud5">
        <div class="leaves leaves5"></div>
    </div>
    
    <div id="shop-modal">
        <div class="shop-content">
          <button class="close-shop-button" id="close-shop-button">&times;</button>
          <h2 style="color: white; text-align: center; margin-bottom: 20px;">Магазин</h2>
          <div class="shop-items"></div>
        </div>
    </div>

    <div id="inventory-modal" class="inventory-modal">
        <div class="inventory-content">
            <button id="close-inventory" class="close-inventory">&times;</button>
            <div class="inventory-items"></div>
        </div>
    </div>

    <div id="action-menu" class="action-menu hidden"></div>

    <!-- Окно телефона -->
    <div id="phone-modal" class="phone-modal">
        <div class="phone-frame">
            <div class="phone-header"></div>
            <div class="phone-screen">
                <!-- Главный экран -->
                <div class="home-screen">
                    <div class="phone-apps">
                        <div class="phone-app" data-app="chats" style="background-color: rgb(47, 203, 0);">
                            <img src="chat.png" alt="Чаты">
                        </div>
                        
                    </div>
                </div>
                
                <!-- Экран приложения (изначально скрыт) -->
                <div class="app-screen" style="display: none;">
                    <div class="app-header">
                        <button class="back-button">← Назад</button>
                        <h2 class="app-title"></h2>
                    </div>
                    <div class="app-content"></div>
                </div>
            </div>
            
            <div class="phone-footer">
                <div id="close-phone" class="close-phone-button"></div>
            </div>
        </div>
    </div>

    <div id="wallet-info" style="display: none; position: fixed; top: 10px; right: 10px; background: rgba(0,0,0,0.7); padding: 5px 10px; border-radius: 5px; color: white; font-size: 12px; z-index: 1000;">
        <span id="wallet-address-short"></span>
    </div>

    <div id="buff-status-container" class="buff-status-container"></div>
    
    <footer>
        <div class="menu">
            <div class="btn-cont">
                <button class="menu_button" id="shop_button"><img src="shop.png" alt=""></button>
                <p>Магазин</p>
            </div>
            <div class="btn-cont">
                <button class="menu_button" id="darknet_button"><img src="phone.png" alt=""></button>
                <p>Телефон</p>
            </div>
            <div class="btn-cont">
                <button class="menu_button" id="inventar_button"><img src="inventory.png" alt=""></button>
                <p>Инвентарь</p>
            </div>
            <div class="btn-cont">
                <button class="menu_button" id="connectBtn"><img src="wallet.png" alt=""></button>
                <p>Кошелек</p>
            </div>
        </div>
    </footer>
</body>
</html>